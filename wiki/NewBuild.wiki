#summary How to build new version of linuxtrack with Qt GUI

= Introduction =

This page provides instructions how to build the new linuxtrack version.

The new linuxtrack versinon has some changes in the build process. The main difference lies in the fact, that it needs to be installed.
If you don't want to install it between your system binaries/libraries (which you shouldn't as it is development version), use --prefix option to specify destination directory.

Also don't forget that installing it into the tree that is not in your search path will cause that system won't be able to find linuxtrack binaries.
 
  
== Building and installing linuxtrack ==

Lets assume you checked out sources from the repository into 
'/home/simmer/linux-track-read-only' and you intend to install it to '/home/simmer/ltr'

{{{
cd /home/simmer/linux-track-read-only
./configure --prefix=/home/simmer/ltr
make
make install
cd src/qt_gui
qmake
make
make install
}}}

Now linuxtrack is installed along with the gui and you need to make it available...
Add following to the .bashrc file (I assume your shell is bash)

{{{
export PATH=${PATH}:/home/simmer/ltr/bin
}}}

This line makes linuxtrack binaries available from everywhere.
If you use TrackIR, you have to download firmware:

http://media.naturalpoint.com/software/external/bulk_config_data.tar.gz

Copy its contents into '/home/simmer/ltr/share/linuxtrack/' directory.

This should get you up and going...


== Ubuntu 10.04 AMD64 compilation notes ==
To build the package on this platform, first install following packages:
qt4-dev-tools
libcwiid-dev
libusb-1.0-0-dev
libopenusb-dev
ia32-libs
g++
g++-multilib

Then go to /usr/lib32 and by running 'ln -s libz.so.1 libz.so' make libz available.

Then download libusb-1.0 and libcwiid, put it to the same directory when you checked out the linuxtrack. Now create a script containing this:

{{{
#!/bin/bash
#

export PREFIX=/home/evik/ltr_bin_new
export CC="gcc -m32"
export CFLAGS="-I${PREFIX}"
export CXXFLAGS="-m32"
export LDFLAGS="-m32 -L${PREFIX}"

#Compile libcwiid
tar xfz cwiid-0.6.00.tgz
pushd cwiid-0.6.00
sed -i s/hci_remote_name/hci_read_remote_name/ libcwiid/bluetooth.c
./configure --prefix=${PREFIX}
cd libcwiid
make install
popd

#Compile libusb 
tar xfj libusb-1.0.8.tar.bz2
pushd libusb-1.0.8
./configure --prefix=${PREFIX}
make install
popd

#Compile Linuxtrack
pushd michal
./configure --prefix=${PREFIX}
make install
cd src/qt_gui
qmake -spec linux-g++-32
make install
popd

#
}}}
(Just make sure that line "#!/bin/bash" is the first line!)
I called the file compile64, and now to be able to execute it I run 'chmod 755 compile64'.

Few notes concerning this script...
  * Change the prefix to a path that suits you...
  * libcwiid in the 0.06.00 revision has a problem with a current blootooth lib, so there is a patch.

Now run the script and when it ends, you should have the thing compiled along with support libraries.
